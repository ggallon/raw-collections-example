<head>
  <title>raw-collection-test</title>
</head>

<body>
  {{> rawCollectionTest}}
</body>

<template name="rawCollectionTest">
  <h1>Meteor rawCollections() test</h1>
  <section>
    <h2>Bulk  operations examples</h2>
    <button data-action="import-basic" disabled={{requesting}}>Import using Meteor methods</button>
    <button data-action="import-bulk" disabled={{requesting}}>Import via rawCollection bulk op</button>
  </section>
  <section>
    <h2>Aggregation examples</h2>
    <button data-action="top-restaurants-basic" disabled={{requesting}}>Get top restaurants using JS calc</button>
    <button data-action="top-restaurants-aggregation" disabled={{requesting}}>Get top restaurants using MongoDB aggregation</button>
  </section>
  {{#if restaurants}}
    <section>
      <h2>Top Restaurants</h2>
        <table>
          <colgroup>
            <col width="50%">
            <col width="20%">
            <col width="30%">
          </colgroup>
          <thead>
            <tr>
              <th>Name</th>
              <th>Reviews</th>
              <th>Average Score</th>
            </tr>
          </thead>
          <tbody>
            {{#each restaurants}}
              <tr>
                <td>{{name}}</td>
                <td>{{numGrades}}</td>
                <td>{{round averageScore}}</td>              
              </tr>
            {{/each}}
          </tbody>
        </table>
    </section>
  {{/if}}
</template>